<%- include('../partials/header') %>

<div class="container mt-5">
  <h2 class="text-primary mb-4">All Notifications</h2>

  <% if (notifications.length === 0) { %>
    <p class="text-muted">No notifications found.</p>
  <% } else { %>
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-primary">
          <tr>
            <th>Message</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <% notifications.forEach(n => { %>
          <tr class="<%= n.is_read ? 'text-muted' : '' %>">
            <td><%= n.message %></td>
            <td>
              <% if(n.is_read) { %>
                <span class="badge bg-secondary">Read</span>
              <% } else { %>
                <span class="badge bg-warning text-dark">Unread</span>
              <% } %>
            </td>
            <td><%= new Date(n.created_at).toLocaleString() %></td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <form method="post" action="/citizen/notifications/read" class="mt-3">
      <button type="submit" class="btn btn-outline-secondary">Mark All as Read</button>
    </form>
  <% } %>
</div>

<%- include('../partials/footer') %>
