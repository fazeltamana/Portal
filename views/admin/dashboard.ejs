<%- include('../partials/header') %>

<div class="container mt-5">
  <h2 class="text-primary mb-4">Admin Dashboard</h2>

  <!-- Department Stats Card -->
  <div class="mb-4">
    <h4 class="mb-3">Requests by Department</h4>
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-primary">
          <tr>
            <th>Department</th>
            <th>Total Requests</th>
          </tr>
        </thead>
        <tbody>
          <% deptStats.forEach(d => { %>
          <tr>
            <td><%= d.name %></td>
            <td><span class="badge bg-info text-dark"><%= d.total_requests %></span></td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Status Stats Cards -->
  <div class="mb-4">
    <h4 class="mb-3">Status Statistics</h4>
    <div class="row g-3">
      <% statusStats.forEach(s => { %>
        <div class="col-md-3 col-sm-6">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title"><%= s.status %></h5>
              <p class="card-text display-6"><%= s.count %></p>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <!-- Total Fees Collected -->
  <div class="mb-4">
    <h4>Total Fees Collected</h4>
    <div class="card shadow-sm w-50">
      <div class="card-body">
        <h5 class="card-title text-success">$<%= totalCollected %></h5>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
